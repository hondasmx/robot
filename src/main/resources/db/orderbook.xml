<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">

    <changeSet id="2021-12-13" author="hondasmx">
        <sql>
            CREATE TABLE if not exists orderbook
            (
                id         integer generated by default as identity NOT NULL,
                figi       text                                     NOT NULL,
                bid real                                            NOT NULL,
                ask real                                            NOT NULL,
                is_consistent  Boolean                                      ,
                timestamp  timestamp with time zone                 NOT NULL,
                created_at timestamp with time zone DEFAULT now()   NOT NULL,
                PRIMARY KEY (id)
            );

            ALTER TABLE orderbook
                OWNER TO postgres;

        </sql>
    </changeSet>
    <changeSet id="2022-03-15" author="hondasmx">
        <sql>
            ALTER TABLE orderbook ADD COLUMN IF NOT EXISTS limit_up real, ADD COLUMN IF NOT EXISTS limit_down real;

        </sql>
    </changeSet>
    <changeSet id="2022-03-30" author="hondasmx">
        <sql>
            ALTER TABLE orderbook ADD COLUMN IF NOT EXISTS close_price real, ADD COLUMN IF NOT EXISTS last_price real;

        </sql>
    </changeSet>
</databaseChangeLog>